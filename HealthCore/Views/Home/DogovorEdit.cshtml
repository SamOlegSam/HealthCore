@model HealthCore.Models.Dogovor

<div class="modal-header" style="text-align: center; background-color: #d4d7d9; border-radius:5px;">
    <h5><b> Редактирование договора</b></h5>
</div>
<div class="modal-body">

    @*<label>ID записи</label>*@
    <input type="hidden" class="form-control btn-block" id="IDEdit" value="@Model.Id" />

   <table>       
               
        <tr>
            <td>
<center><label> Тип договора</label></center>
            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
 <center><label> Сумма договора </label></center>
            </td>
        </tr>

        <tr>
            <td>
 <select class="form-select" contenteditable="true" id="TypeDogEdit">
                   @foreach (var dol in ViewBag.listType)
        {
            if (dol.Id == @Model.TypeDogId)
            {
                <option value="@dol.Id" selected> @dol.Name </option>
            }
            else
            {
                <option value="@dol.Id"> @dol.Name</option>
            }
        }                                       
                </select>
            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
            <input type="text" class="form-control btn-block" id="SummaDogEdit" onkeyup="this.value = this.value.replace(/[A-Za-zА-Яа-яЁё]/, '');" value="@Model.SummaDog"/>
             </td>
        </tr>

 <tr>
            <td>
<center><label> Номер договора</label></center>
            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
 <center><label> Дата договора </label></center>
            </td>
        </tr>
        <tr>
            <td>
<input type="text" class="form-control btn-block" id="NumberEdit" value="@Model.Number"/>
            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
 <input type="date" class="form-control btn-block" id="DataDogEdit" value="@Model.DateDog"/>
 <script>

                    var str = "@Model.DateDog";
                    console.log(str);

                    var day = str.substr(0, 2);
                    console.log(day);

                    var month = str.substr(3, 2);
                    console.log(month);

                    var year = str.substr(6, 4);
                    console.log(year);

                    var strDate = year + "-" + month + "-" + day
                    console.log(strDate);


                    document.getElementById("DataDogEdit").value = strDate;

                </script>
            </td>
        </tr>
        <tr>
            <td>
<center><label> Дата начала действия</label></center>
            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
 <center><label> Дата окончания действия</label></center>
            </td>
        </tr>

        <tr>
            <td>
<input type="date" class="form-control btn-block" id="DataStartEdit" value="@Model.DateStart"/>
                <script>

                    var str1 = "@Model.DateStart";
                    
                    var day1 = str1.substr(0, 2);
                    
                    var month1 = str1.substr(3, 2);
                    
                    var year1 = str1.substr(6, 4);
                    
                    var strDate1 = year1 + "-" + month1 + "-" + day1
                    
                    document.getElementById("DataStartEdit").value = strDate1;

                </script>

            </td>
            <td>
                &nbsp;&nbsp;
            </td>
            <td>
 <input type="date" class="form-control btn-block" id="DataEndEdit" value="@Model.DateEnd"/>
                 <script>

                    var str2 = "@Model.DateEnd";
                    
                    var day2 = str2.substr(0, 2);
                    
                    var month2 = str2.substr(3, 2);
                    
                    var year2 = str2.substr(6, 4);
                    
                    var strDate2 = year2 + "-" + month2 + "-" + day2
                    
                    document.getElementById("DataEndEdit").value = strDate2;

                </script>


            </td>
        </tr>

        <tr>
            <td colspan = 3>
<center><label>Контрагент</label></center>
    
 <select class="form-select" contenteditable="true" id="SanatoriumEdit">

        @foreach (var dol in ViewBag.listsanatorium)
        {
            if (dol.Id == @Model.SanatoriumId)
            {
                <option value="@dol.Id" selected> @dol.Name </option>
            }
            else
            {
                <option value="@dol.Id"> @dol.Name</option>
            }
        }
    </select>

            </td>            
        </tr>
        <tr>
            <td colspan = 3>
<center><label>Контроль</label></center>
    <select class="form-select" contenteditable="true" id="PriznakKontrolEdit">
        @if(Model.PriznakKontrol == 0)
                    {
                   <option value="0" selected >Без контроля</option>
                   <option value="1" >Договор пролангируется</option>
                   <option value="2" >Контроль суммы договора</option>
                   <option value="3" >Контроль БВ</option>
                    }                   
                   else if(Model.PriznakKontrol == 1)
                   {
                   <option value="0" >Без контроля</option>
                   <option value="1" selected >Договор пролангируется</option>
                   <option value="2" >Контроль суммы договора</option>
                   <option value="3" >Контроль БВ</option>
                   }
                   else if(Model.PriznakKontrol == 2)
                   {
                   <option value="0" >Без контроля</option>
                   <option value="1" >Договор пролангируется</option>
                   <option value="2" selected >Контроль суммы договора</option>
                   <option value="3" >Контроль БВ</option>
                   }
                   else if(Model.PriznakKontrol == 3)
                   {
                   <option value="0" >Без контроля</option>
                   <option value="1" >Договор пролангируется</option>
                   <option value="2" >Контроль суммы договора</option>
                   <option value="3" selected >Контроль БВ</option>
                   }
                </select>
            </td>            
        </tr>
    </table>

    <hr>
    <table>
    @if (Model.PriznakClose == "Закрыт")
    {
        <tr style="background-color:white">
            <td>
                <input type="checkbox" id="rules" class="checkbox" checked>
            </td>
            <td>&nbsp;&nbsp;</td>
            <td>
                <label> Договор закрыт</label>
            </td>
        </tr>
    }
    else
    {
        <tr style="background-color:white">
            <td>
                <input type="checkbox" id="rules" class="checkbox" >
            </td>
            <td>&nbsp;&nbsp;</td>
            <td>
                <label> Договор закрыт</label>
            </td>
        </tr>
    }
</table>
    
    <input type="hidden" class="form-control btn-block" id="UserModifEdit" value="@User.Identity?.Name" />
    
</div>
<div class="modal-footer" style="text-align:center">
    <button type="submit" class="btn btn-outline-secondary" style="min-width:100px" onclick="DogovorEditSave(0)">Сохранить</button>
    <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal" style="min-width:100px">Отмена</button>
</div>

<script>
    	
  if($('#PriznakKontrolEdit').val() == 2)
  {
    $('#SummaDogEdit').prop('readonly',false);
  }  
  else
  {
  $('#SummaDogEdit').prop('readonly', true);  
  }
</script>

<script>
    $('#PriznakKontrolEdit').change(function(){
	
  if($('#PriznakKontrolEdit').val() == 2)
  {
    $('#SummaDogEdit').prop('readonly',false);
  }  
  else
  {
  $('#SummaDogEdit').prop('readonly', true);  
  }
});
</script>





